<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Income vs Outcome Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background-color: #f4f7fa; }
        .Linearcontainer { display: flex; flex-direction: column; align-items: center; width: 90vw; max-width: 800px; height: 90vh; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); }
        h1 { color: #333; }
        .inputs { display: flex; gap: 10px; margin-bottom: 10px; }
        input { padding: 10px; font-size: 16px; border: 1px solid #ccc; border-radius: 5px; width: 120px; text-align: center; }
        button { padding: 10px 20px; font-size: 16px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #45a049; }
        .chart-container { width: 100%; flex-grow: 1; display: flex; justify-content: center; align-items: center; }
        canvas { width: 100% !important; height: 100% !important; max-height: 400px; }
        .final-values { margin-top: 10px; font-size: 18px; text-align: center; color: #333; }
        .reset-button { background-color: red; margin-top: 10px; }
        .reset-button:hover { background-color: darkred; }
    </style>
</head>
<body>

    <div class="Linearcontainer">
        <h1>Income vs Outcome Tracker</h1>

        <div class="inputs">
            <input type="number" id="startIncome" placeholder="Start Income">
            <input type="number" id="startOutcome" placeholder="Start Outcome">
            <button onclick="setInitialValues()">Set Start</button>
        </div>

        <div class="inputs">
            <input type="number" id="income" placeholder="Income">
            <input type="number" id="outcome" placeholder="Outcome">
            <button onclick="updateGraph()">Add Data</button>
        </div>

        <div class="chart-container">
            <canvas id="myChart"></canvas>
        </div>

        <div class="final-values">
            <p><strong>Income:</strong> <span id="finalIncome">0</span> $</p>
            <p><strong>Outcome:</strong> <span id="finalOutcome">0</span> $</p>
        </div>

        <button class="reset-button" onclick="resetData()">Reset Data</button>
    </div>

    <script>


      
        const ctx = document.getElementById('myChart').getContext('2d');
        let labels = [], incomeData = [], outcomeData = [];
        let cumulativeIncome = 0, cumulativeOutcome = 0;
        let myChart;

        function loadSavedData() {
            const savedData = JSON.parse(localStorage.getItem("POWER"));
            if (savedData.linearGraph) {
                labels = savedData.linearGraph.labels || [];
                incomeData = savedData.linearGraph.incomeData || [];
                outcomeData = savedData.linearGraph.outcomeData || [];
                cumulativeIncome = savedData.linearGraph.cumulativeIncome || 0;
                cumulativeOutcome = savedData.linearGraph.cumulativeOutcome || 0;
            }
        }

        function saveData() {
            const POWER = {
        pizzaGraph: {
            January: { expenses: [] },
            February: { expenses: [] },
            March: { expenses: [] },
            April: { expenses: [] },
            May: { expenses: [] },
            June: { expenses: [] },
            July: { expenses: [] },
            August: { expenses: [] },
            September: { expenses: [] },
            October: { expenses: [] },
            November: { expenses: [] },
            December: { expenses: [] },
        },
        linearGraph: {labels, incomeData, outcomeData, cumulativeIncome, cumulativeOutcome}
    };

            let power = JSON.parse(localStorage.getItem("POWER"));
            if (power) {
                power.linearGraph = {labels, incomeData, outcomeData, cumulativeIncome, cumulativeOutcome}; 
            } else {
                power = POWER
            }
            


            localStorage.setItem('POWER', JSON.stringify(power));
        }

        function getCurrentDate() {
            const date = new Date();
            const day = date.getDate();
            const month = date.getMonth() + 1; // Months are 0-based
            const weekDays = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
            const weekDay = weekDays[date.getDay()];
            return `${day}/${month} ${weekDay}`;
        }

        function createChart() {
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        { label: 'Income', data: incomeData, borderColor: 'green', borderWidth: 3, tension: 0.4 },
                        { label: 'Outcome', data: outcomeData, borderColor: 'red', borderWidth: 3, tension: 0.4 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { x: { ticks: { font: { size: 14 } } }, y: { ticks: { font: { size: 14 }, beginAtZero: true } } }
                }
            });
        }

        function setInitialValues() {
            cumulativeIncome = parseFloat(document.getElementById('startIncome').value) || 0;
            cumulativeOutcome = parseFloat(document.getElementById('startOutcome').value) || 0;
            labels = [getCurrentDate()];
            incomeData = [cumulativeIncome];
            outcomeData = [cumulativeOutcome];

            updateChart();
            saveData();
        }

        function updateGraph() {
            const income = parseFloat(document.getElementById('income').value) || 0;
            const outcome = parseFloat(document.getElementById('outcome').value) || 0;

            cumulativeIncome += income;
            cumulativeOutcome -= outcome;

            labels.push(getCurrentDate());
            incomeData.push(cumulativeIncome);
            outcomeData.push(cumulativeOutcome);

            updateChart();
            saveData();
        }

        function updateChart() {
            myChart.data.labels = labels;
            myChart.data.datasets[0].data = incomeData;
            myChart.data.datasets[1].data = outcomeData;
            myChart.update();

            document.getElementById('finalIncome').textContent = cumulativeIncome.toFixed(2);
            document.getElementById('finalOutcome').textContent = cumulativeOutcome.toFixed(2);
        }

        function resetData() {
            localStorage.removeItem('financeData');
            labels = [];
            incomeData = [];
            outcomeData = [];
            cumulativeIncome = 0;
            cumulativeOutcome = 0;
            updateChart();
        }

        loadSavedData();
        createChart();
        updateChart();
      
     
    
    </script>

</body>
</html>
